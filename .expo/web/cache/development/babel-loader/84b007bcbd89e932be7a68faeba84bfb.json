{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport firebase from 'firebase';\n\nvar Fire = function () {\n  function Fire() {\n    var _this = this;\n\n    _classCallCheck(this, Fire);\n\n    this.observeAuth = function () {\n      return firebase.auth().onAuthStateChanged(_this.onAuthStateChanged);\n    };\n\n    this.onAuthStateChanged = function (user) {\n      if (!user) {\n        try {\n          firebase.auth().signInAnonymously();\n        } catch (_ref) {\n          var message = _ref.message;\n          alert(message);\n        }\n      }\n    };\n\n    this.on = function (callback) {\n      return _this.ref.limitToLast(20).on('child_added', function (snapshot) {\n        return callback(_this.parse(snapshot));\n      });\n    };\n\n    this.parse = function (snapshot) {\n      var _snapshot$val = snapshot.val(),\n          numberStamp = _snapshot$val.timestamp,\n          text = _snapshot$val.text,\n          user = _snapshot$val.user;\n\n      var _id = snapshot.key;\n      var timestamp = new Date(numberStamp);\n      var message = {\n        _id: _id,\n        timestamp: timestamp,\n        text: text,\n        user: user\n      };\n      console.log(messages);\n      return message;\n    };\n\n    this.send = function (messages) {\n      for (var i = 0; i < messages.length; i++) {\n        var _messages$i = messages[i],\n            text = _messages$i.text,\n            user = _messages$i.user;\n        var message = {\n          text: text,\n          user: user,\n          timestamp: _this.timestamp\n        };\n\n        _this.append(message);\n\n        append = function append(message) {\n          return _this.ref.push(message);\n        };\n      }\n    };\n\n    this.init = function () {\n      return firebase.initializeApp({\n        apiKey: \"AIzaSyBy_E4K8UYuBxeKHagieRgmLIaKsOGGdfA\",\n        authDomain: \"chat-app-4e1ed.firebaseapp.com\",\n        databaseURL: \"https://chat-app-4e1ed-default-rtdb.firebaseio.com\",\n        projectId: \"chat-app-4e1ed\",\n        storageBucket: \"chat-app-4e1ed.appspot.com\",\n        messagingSenderId: \"1081745367221\",\n        appId: \"1:1081745367221:web:c026781c5090e4e5139efc\",\n        measurementId: \"G-H1BSSFBPMZ\"\n      });\n    };\n\n    this.init();\n    this.observeAuth();\n  }\n\n  _createClass(Fire, [{\n    key: \"off\",\n    value: function off() {\n      this.ref.off();\n    }\n  }, {\n    key: \"ref\",\n    get: function get() {\n      return firebase.database().ref('messages');\n    }\n  }, {\n    key: \"uid\",\n    get: function get() {\n      return (firebase.auth().currentUser || {}).uid;\n    }\n  }, {\n    key: \"timestamp\",\n    get: function get() {\n      return firebase.database.ServerValue.TIMESTAMP;\n    }\n  }]);\n\n  return Fire;\n}();\n\nFire.shared = new Fire();\nexport default Fire;","map":{"version":3,"sources":["C:/Users/User/Desktop/front-end-react-native-mobilapp/components/Fire.js"],"names":["firebase","Fire","observeAuth","auth","onAuthStateChanged","user","signInAnonymously","message","alert","on","callback","ref","limitToLast","snapshot","parse","val","numberStamp","timestamp","text","_id","key","Date","console","log","messages","send","i","length","append","push","init","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","off","database","currentUser","uid","ServerValue","TIMESTAMP","shared"],"mappings":"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","sourcesContent":["import firebase from 'firebase'; \r\n\r\n\r\nclass Fire {\r\n    constructor() {\r\n        this.init();\r\n        // if it doesnâ€™t exist then we want to sign in anonymously.\r\n        this.observeAuth();\r\n    }\r\n    observeAuth = () =>\r\n    firebase.auth().onAuthStateChanged(this.onAuthStateChanged);\r\n\r\n    onAuthStateChanged = user => {\r\n        if (!user) {\r\n          try {\r\n            firebase.auth().signInAnonymously();\r\n        } catch ({ message }) {\r\n          alert(message);\r\n        }\r\n\r\n    }\r\n};\r\n\r\n\r\n\r\nget ref() {\r\n    return firebase.database().ref('messages');  // this is a references location to our data base which is /messages\r\n  }\r\n  on = callback =>\r\n    this.ref\r\n      .limitToLast(20)\r\n      .on('child_added', snapshot => callback(this.parse(snapshot)));\r\n    \r\n\r\n\r\n      parse = snapshot => {\r\n\r\n        const { timestamp: numberStamp, text, user } = snapshot.val();\r\n        const { key: _id } = snapshot;\r\n        const timestamp = new Date(numberStamp);\r\n        const message = {\r\n            _id,\r\n            timestamp,\r\n            text,\r\n            user,\r\n          };\r\n          console.log(messages)\r\n         return message;\r\n\r\n    }\r\n    off() {\r\n        this.ref.off();\r\n      }\r\n      get uid() {\r\n        return (firebase.auth().currentUser || {}).uid;\r\n      }\r\n      get timestamp() {\r\n        return firebase.database.ServerValue.TIMESTAMP;\r\n      }\r\n\r\n\r\n      //Create a shape that if good for firebase and save it to our server\r\n      send = messages => {\r\n        for (let i = 0; i < messages.length; i++) {\r\n          const { text, user } = messages[i];\r\n        \r\n          const message = {\r\n            text,\r\n            user,\r\n            timestamp: this.timestamp,\r\n          };\r\n\r\n          this.append(message);\r\n          append = message => this.ref.push(message);\r\n        }\r\n      };\r\n       //The append function will save the message object with a unique ID\r\n      \r\n\r\n    \r\n\r\n    init = () =>\r\n    firebase.initializeApp({\r\n        apiKey: \"AIzaSyBy_E4K8UYuBxeKHagieRgmLIaKsOGGdfA\",\r\n        authDomain: \"chat-app-4e1ed.firebaseapp.com\",\r\n        databaseURL: \"https://chat-app-4e1ed-default-rtdb.firebaseio.com\",\r\n        projectId: \"chat-app-4e1ed\",\r\n        storageBucket: \"chat-app-4e1ed.appspot.com\",\r\n        messagingSenderId: \"1081745367221\",\r\n        appId: \"1:1081745367221:web:c026781c5090e4e5139efc\",\r\n        measurementId: \"G-H1BSSFBPMZ\"\r\n    });\r\n\r\n}\r\nFire.shared = new Fire();\r\n\r\n\r\n\r\n\r\nexport default Fire;\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}